ğŸ“‹ SYNTHÃˆSE EXHAUSTIVE AVANT CODAGE
ğŸ¯ OBJECTIF
CrÃ©er isbn_unified.sh qui fusionne TOUTES les fonctionnalitÃ©s de :

run.sh
add_book_minimal.sh
add_and_collect.sh
collect_api_data.sh
analyze_with_collect.sh
martingale.sh

ğŸ“ STRUCTURE DES FICHIERS
Fichier principal :

isbn_unified.sh (~800 lignes) : Menu, routing, logique principale

Fichiers Ã  crÃ©er :

apis/claude_ai.sh : API Claude pour descriptions
lib/export_checks.sh : VÃ©rifications d'exportabilitÃ©
lib/maintenance_tools.sh : Outils de maintenance

Fichiers Ã  mettre Ã  jour :

lib/enrichment.sh : +fonctions de collecte depuis collect_api_data.sh
lib/analyze_display.sh : +affichage mode notableau

Fichiers Ã  renommer en .bak :

Les 6 fichiers fusionnÃ©s

ğŸ”§ FONCTIONNALITÃ‰S PRINCIPALES

Modes de lancement :

Sans params â†’ Menu interactif
Avec ISBN â†’ Analyse directe
Avec options â†’ Actions spÃ©cifiques


Options disponibles :

-force : RÃ©analyse forcÃ©e
-notableau : Sans tableaux AVANT/APRÃˆS
-vendu ISBN : DÃ©crÃ©mente stock
-export [market] : Export marketplace
-n[X] : Limite nombre de livres
-s[X] : Pause X secondes
-groq : Utilise Groq au lieu de Claude
-noverbose[2] : Moins de dÃ©tails


Menu principal (10 options) :

Analyse complÃ¨te (AVANT/APRÃˆS)
Collecte rapide (sans tableaux)
Ajouter un nouveau livre
Marquer comme vendu
Rapport complet (ex-martingale)
Exporter vers marketplaces
CatÃ©gorisation IA double
GÃ©nÃ©rer rapport statistiques
Tester les APIs
Maintenance (sous-menu)



ğŸ“Š NOUVELLES FONCTIONNALITÃ‰S

Gestion du stock :

Nouvelle meta _stock_quantity
DÃ©crÃ©mentation avec -vendu
Mise Ã  jour _stock_status


Score d'exportabilitÃ© :

Calcul dynamique des points
Affichage "18/20 points"
Liste des donnÃ©es manquantes


Import images WordPress :

TÃ©lÃ©chargement et vÃ©rification
Import dans Media Library
Stockage URLs + attachment ID


Mode notableau :

Affichage compact
Description Claude visible
Stats finales (X/Y points)


Maintenance avancÃ©e :

Recalcul poids/dimensions
VÃ©rification images cassÃ©es
Export CSV inventaire
Nettoyage titres
Stats globales



ğŸ”„ WORKFLOW DE COLLECTE

VÃ©rification initiale :

ISBN existe ? â†’ Proposer analyse
DonnÃ©es complÃ¨tes ? â†’ Score et manques
Force ? â†’ Skip vÃ©rifications


Collecte APIs (ordre) :

Google Books â†’ ISBNdb â†’ Open Library
Si pas de description â†’ Claude (ou Groq si -groq)
Calculs automatiques (poids, dimensions)


Post-traitement :

Import images si trouvÃ©es
Calcul score exportabilitÃ©
Stockage mÃ©tadonnÃ©es
Correction bug publisher



âš¡ COMPORTEMENTS SPÃ‰CIAUX

Prix = 0 â†’ Toujours redemander
Stock par dÃ©faut = 1
Ã‰tat mapping â†’ 6 Ã©tats vers formats marketplace
Pause collecte â†’ Variable COLLECT_DELAY
Erreur Claude â†’ ArrÃªt complet (pas de fallback Groq)
Images â†’ VÃ©rifier existence + dimensions si possible

ğŸ›¡ï¸ SÃ‰CURITÃ‰

Utilisation systÃ©matique de safe_sql pour apostrophes
Validation ISBN avant traitement
VÃ©rification packages avant utilisation
Gestion erreurs MySQL propre
Logs dÃ©taillÃ©s en mode DEBUG

ğŸ“ ORDRE DE DÃ‰VELOPPEMENT

apis/claude_ai.sh (nouveau)
lib/export_checks.sh (nouveau)
lib/maintenance_tools.sh (nouveau)
lib/enrichment.sh (mise Ã  jour)
lib/analyze_display.sh (mise Ã  jour)
isbn_unified.sh (principal)
